{{> header}}
      <div class="container">
          <div class="col-md-2">
            <div class="panel panel-sm">


        <div class="sm-frame3">
            <div class="sm-company">{{ stock.name }}</div>
            <div class="sm-symbol">{{ stock.id }}</div>  
            <div class="sm-quote-div"><i class="arrow sm-icon {{ cls }}"></i><span class="sm-quote">{{ stock.ask }}</span></div>
            <div class="sm-change-div"><div>{{plus}}{{ stock.change }}</div><div>{{ stock.changeInPercent }}%</div></div>
        </div>

            </div>

            {{#analys}}
            <div class="panel panel-sm z-analyst">
                <table class="table">
                    <tr><td></td><td>3m</td><td>2m</td><td>1m</td><td></td></tr>
                    <tr><td>Strong</td>
                    {{#analys}}
                        {{#strong}}
                            <td>{{.}}</td>
                        {{/strong}}
                    {{/analys}}
                    </tr>
                    <tr><td>Buy</td>
                    {{#analys}}
                        {{#buy}}
                            <td>{{.}}</td>
                        {{/buy}}
                    {{/analys}}
                    </tr>
                    <tr><td>Hold</td>
                    {{#analys}}
                        {{#hold}}
                            <td>{{.}}</td>
                        {{/hold}}
                    {{/analys}}
                    </tr>
                    <tr><td>Under</td>
                    {{#analys}}
                        {{#under}}
                            <td>{{.}}</td>
                        {{/under}}
                    {{/analys}}
                    <tr><td>Sell</td>
                    {{#analys}}
                        {{#sell}}
                            <td>{{.}}</td>
                        {{/sell}}
                    {{/analys}}
                    </tr>
                    </tr>
                </table>
            </div>
            {{/analys}}


            <div class="panel panel-sm">
                <input class="z-52wk" type='range' disabled min='{{ stock.yearLow }}' max='{{ stock.yearHigh }}' value='{{ stock.ask }}' step='1'/>
            </div>
          </div>
          <div class="col-md-8">
            <div id="z-stock-chart"></div>
          </div>
          <div class="col-md-2">
            <iframe width='300px' height='400px' style='border-radius: 5px;' src='https://simplywall.st/api/snowflake/US:{{ stock.id }}/widget/272b30' frameborder='0'></iframe>
        </div>

          <div class="col-md-2">
            <div>{{ stock.id }}</div>
          </div>
          <div class="col-md-8">
          </div>
          <div class="col-md-2">
            <div id="z-stocktwits"></div>
        </div>
    </div>







    <script src="//code.highcharts.com/stock/highstock.js"></script>
    <script src="//stocktwits.com/addon/widget/2/widget-loader.min.js"></script>
    <script>

$(function() {
        STWT.Widget({
            container: 'z-stocktwits',
            symbol: '{{ stock.id }}',
            header: 0,
            title: '',
            avatars: 0,
            width: '300',
            height: '300',
            limit: '30',
            scrollbars: 1,
            streaming: 'true',
            font: 'Lato, "Helvetica Neue", Helvetica, Arial, sans-serif',
            font_size: 12,
            username_font: 'Lato, "Helvetica Neue", Helvetica, Arial, sans-serif',
            style: {
                link_color: '4871a8',
                link_hover_color: '4871a8',
                header_text_color: '272b30',
                border_color: '272b30',
                divider_color: '272b30',
                divider_color: '272b30',
                divider_type: 'none',
                box_color: '272b30',
                border_color_2: '272b30',
                stream_color: '272b30',
                username_color: 'c8c8c8',
                username_size: 10,
                time_font_size: 8,
                text_color: 'c8c8c8',
                time_color: '999999'
            }
        });

Highcharts.theme = {
   colors: ["#2b908f", "#90ee7e", "#f45b5b", "#7798BF", "#aaeeee", "#ff0066", "#eeaaee",
      "#55BF3B", "#DF5353", "#7798BF", "#aaeeee"],
   chart: {
      backgroundColor: {
         linearGradient: { x1: 0, y1: 0, x2: 1, y2: 1 },
         stops: [
            [0, '#272b30'],
            [1, '#272b30']
         ]
      },
      style: {
         fontFamily: "Lato, 'Helvetica Neue',Helvetica,Arial,sans-serif"
      },
      plotBorderColor: '#606063'
   },
   title: {
      style: {
         color: '#E0E0E3',
         textTransform: 'uppercase',
         fontSize: '20px'
      }
   },
   subtitle: {
      style: {
         color: '#E0E0E3',
         textTransform: 'uppercase'
      }
   },
   xAxis: {
      gridLineColor: '#707073',
      labels: {
         style: {
            color: '#E0E0E3'
         }
      },
      lineColor: '#707073',
      minorGridLineColor: '#505053',
      tickColor: '#707073',
      title: {
         style: {
            color: '#A0A0A3'

         }
      }
   },
   yAxis: {
      gridLineColor: '#707073',
      labels: {
         style: {
            color: '#E0E0E3'
         }
      },
      lineColor: '#707073',
      minorGridLineColor: '#505053',
      tickColor: '#707073',
      tickWidth: 1,
      title: {
         style: {
            color: '#A0A0A3'
         }
      }
   },
   tooltip: {
      backgroundColor: 'rgba(0, 0, 0, 0.85)',
      style: {
         color: '#F0F0F0'
      }
   },
   plotOptions: {
      series: {
         dataLabels: {
            color: '#B0B0B3'
         },
         marker: {
            lineColor: '#333'
         }
      },
      boxplot: {
         fillColor: '#505053'
      },
      candlestick: {
         lineColor: 'white'
      },
      errorbar: {
         color: 'white'
      }
   },
   legend: {
      itemStyle: {
         color: '#E0E0E3'
      },
      itemHoverStyle: {
         color: '#FFF'
      },
      itemHiddenStyle: {
         color: '#606063'
      }
   },
   credits: {
      style: {
         color: '#666'
      }
   },
   labels: {
      style: {
         color: '#707073'
      }
   },

   drilldown: {
      activeAxisLabelStyle: {
         color: '#F0F0F3'
      },
      activeDataLabelStyle: {
         color: '#F0F0F3'
      }
   },

   navigation: {
      buttonOptions: {
         symbolStroke: '#DDDDDD',
         theme: {
            fill: '#505053'
         }
      }
   },

   // scroll charts
   rangeSelector: {
      buttonTheme: {
         fill: '#505053',
         stroke: '#000000',
         style: {
            color: '#CCC'
         },
         states: {
            hover: {
               fill: '#707073',
               stroke: '#000000',
               style: {
                  color: 'white'
               }
            },
            select: {
               fill: '#000003',
               stroke: '#000000',
               style: {
                  color: 'white'
               }
            }
         }
      },
      inputBoxBorderColor: '#505053',
      inputStyle: {
         backgroundColor: '#333',
         color: 'silver'
      },
      labelStyle: {
         color: 'silver'
      },
      buttons: [{
            type : 'week',
            count : 1,
            text : '1w'
        }, {
            type: 'month',
            count: 1,
            text: '1m'
        }, {
            type: 'month',
            count: 3,
            text: '3m'
        }, {
            type: 'month',
            count: 6,
            text: '6m'
        }, {
            type: 'ytd',
            text: 'YTD'
        }, {
            type: 'year',
            count: 1,
            text: '1y'
        }, {
            type: 'year',
            count: 5,
            text: '5y'
        }, {
            type : 'all',
            count : 1,
            text : 'All'
        }],
      selected : 1,
      inputEnabled : true
   },

   navigator: {
      handles: {
         backgroundColor: '#666',
         borderColor: '#AAA'
      },
      outlineColor: '#CCC',
      maskFill: 'rgba(255,255,255,0.1)',
      series: {
         color: '#7798BF',
         lineColor: '#A6C7ED'
      },
      xAxis: {
         gridLineColor: '#505053'
      }
   },

   scrollbar: {
      barBackgroundColor: '#808083',
      barBorderColor: '#808083',
      buttonArrowColor: '#CCC',
      buttonBackgroundColor: '#606063',
      buttonBorderColor: '#606063',
      rifleColor: '#FFF',
      trackBackgroundColor: '#404043',
      trackBorderColor: '#404043'
   },

   // special colors for some of the
   legendBackgroundColor: 'rgba(0, 0, 0, 0.5)',
   background2: '#505053',
   dataLabelsColor: '#B0B0B3',
   textColor: '#C0C0C0',
   contrastTextColor: '#F0F0F3',
   maskColor: 'rgba(255,255,255,0.3)'
};

// Apply the theme
Highcharts.setOptions(Highcharts.theme);
Highcharts.setOptions({
    lang: {
        rangeSelectorZoom :""
    }
});
    $.getJSON('/stock/history/{{ stock.id }}?callback=?', function (data) {
        if (!data) {
            console.log('No data!' + '{{ lwr }}');
            return;
        }

        // split the data set into ohlc and volume
        var ohlc = [],
            volume = [],
            dataLength = data.length,
            // set the allowed units for data grouping
            groupingUnits = [[
                'week',                         // unit name
                [1]                             // allowed multiples
            ], [
                'month',
                [1, 2, 3, 4, 6]
            ]],

            i = 0;

        for (i; i < dataLength; i += 1) {
            ohlc.push([
                data[i][0], // the date
                data[i][1], // open
                data[i][2], // high
                data[i][3], // low
                data[i][4] // close
            ]);

            volume.push([
                data[i][0], // the date
                data[i][5] // the volume
            ]);
        }


        // create the chart
        $('#z-stock-chart').highcharts('StockChart', {
            rangeSelector: {
                selected: 1
            },
            title: {
                text: '{{ stock.id }} Historical'
            },
            yAxis: [{
                labels: {
                    align: 'right',
                    x: -3
                },
                title: {
                    text: 'OHLC'
                },
                height: '90%',
                lineWidth: 2
            }, {
                labels: {
                    align: 'right',
                    x: -3
                },
                title: {
                    text: 'Volume'
                },
                top: '85%',
                height: '35%',
                offset: 0,
                lineWidth: 2
            }],

            series: [{
                type: 'candlestick',
                name: '{{ stock.id }}',
                data: ohlc,
                dataGrouping: {
                    units: groupingUnits
                }
            }, {
                type: 'column',
                name: 'Volume',
                data: volume,
                yAxis: 1,
                dataGrouping: {
                    units: groupingUnits
                }
            }]
        });
    });
});
    </script>


    <!-- BEGIN 52wk widget -->
    <style>
input[type='range'].z-52wk {
  position: relative;
  top: 50%;
  left: 50%;
  border: solid 0 transparent;
  border-width: 0 5px;
  padding: 5em 0em 0em 0em;
  width: 100%;
  height: 2em;
  border-radius: 0.25em;
  transform: translate(-50%, -50%);
  background: transparent;
  font-size: 0.8em;
}
input[type='range'], input[type='range']::-webkit-slider-runnable-track, input[type='range']::-webkit-slider-thumb {
  -webkit-appearance: none;
}
input[type='range']::-webkit-slider-runnable-track {
  position: relative;
  width: 12em;
  height: 0.375em;
  background: linear-gradient(90deg, #ffffff 0.125em, rgba(0, 0, 0, 0) 0.125em)-0.0625em 50%, linear-gradient(90deg, #e60000, #e63900, #e67300, #e6ac00, #e6e600, #ace600, #73e600);
  background-size: 0em 100%, 100% 100%;
}
input[type='range']::-moz-range-track {
  width: 12em;
  height: 0.375em;
  background: linear-gradient(90deg, #ffffff 0.125em, rgba(0, 0, 0, 0) 0.125em)-0.0625em 50%, linear-gradient(90deg, #e60000, #e63900, #e67300, #e6ac00, #e6e600, #ace600, #73e600);
  background-size: 1em 100%, 100% 100%;
}
input[type='range']::-ms-track {
  border: none;
  width: 12em;
  height: 0.375em;
  background: linear-gradient(90deg, #ffffff 0.125em, rgba(0, 0, 0, 0) 0.125em)-0.0625em 50%, linear-gradient(90deg, #e60000, #e63900, #e67300, #e6ac00, #e6e600, #ace600, #73e600);
  background-size: 1em 100%, 100% 100%;
  color: transparent;
}
input[type='range']::-ms-fill-lower {
  display: none;
}
input[type='range']::-webkit-slider-thumb {
  margin-top: -0.8125em;
  box-sizing: border-box;
  width: 2em;
  height: 2em;
  border-radius: 0;
  transform: translateY(75%) rotate(30deg) skewY(30deg) scaleX(0.86603);
  background: linear-gradient(135deg, #a7a6a2 25%, rgba(0, 0, 0, 0) 25%) content-box, linear-gradient(135deg, #ffffff 25%, rgba(0, 0, 0, 0) 25%) border-box;
}
input[type='range']::-moz-range-thumb {
  box-sizing: border-box;
  border: solid 1px transparent;
  width: 2em;
  height: 2em;
  border-radius: 0;
  transform: translateY(75%) rotate(30deg) skewY(30deg) scaleX(0.86603);
  background: linear-gradient(135deg, #a7a6a2 25%, rgba(0, 0, 0, 0) 25%) content-box, linear-gradient(135deg, #ffffff 25%, rgba(0, 0, 0, 0) 25%) border-box;
}
input[type='range']::-ms-thumb {
  box-sizing: border-box;
  border: solid 1px transparent;
  width: 2em;
  height: 2em;
  border-radius: 0;
  transform: translateY(75%) rotate(30deg) skewY(30deg) scaleX(0.86603);
  background: linear-gradient(135deg, #a7a6a2 25%, rgba(0, 0, 0, 0) 25%) content-box, linear-gradient(135deg, #ffffff 25%, rgba(0, 0, 0, 0) 25%) border-box;
}
input[type='range']::-webkit-slider-runnable-track:before, input[type='range']::-webkit-slider-runnable-track:after, input[type='range'] /deep/ #track:before, input[type='range'] /deep/ #track:after {
  position: absolute;
  bottom: 100%;
  color: #c8c8c8 !important;
}
input[type='range']::-webkit-slider-runnable-track:before, input[type='range'] /deep/ #track:before {
  left: 0em;
  word-spacing: 1.4375em;
  content: '{{ stock.yearLow }}';
}
input[type='range']::-webkit-slider-runnable-track:after, input[type='range'] /deep/ #track:after {
  right: 0em;
  word-spacing: 0.875em;
  content: '{{ stock.yearHigh }}'
}
input[type='range']:focus {
  outline: none;
  box-shadow: 0 0 .25em orange;
}
    </style>
    <!-- END 52wk widget -->
{{> footer}}
